document.addEventListener('DOMContentLoaded',()=>{fetch('/api/dashboard').then(r=>{if(!r.ok)throw new Error('unauthenticated');return r.json()}).then(data=>{const counts=data&&data.counts||{};document.getElementById('emp-count').textContent=counts.employees||0;document.getElementById('cust-count').textContent=counts.customers||0;document.getElementById('svc-count').textContent=counts.services||0;const fillList=(id,items)=>{const ul=document.getElementById(id);ul.innerHTML='';(items||[]).forEach(it=>{const li=document.createElement('li');li.textContent=it.name||it.title||it.company||'#'+(it.id||'?');ul.appendChild(li)})};fillList('recent-employees',data.recentEmployees||[]);fillList('recent-customers',data.recentCustomers||[]);fillList('recent-services',data.recentServices||[])}).catch(()=>{window.location.href='/login.html'})});
