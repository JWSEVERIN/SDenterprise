(()=>{const l=document.createElement('link');l.rel='stylesheet';l.href='/auth.css';document.head.appendChild(l)})();async function _ec_checkAuth(){try{const res=await fetch('/api/auth-check');return res.ok}catch(e){return false}}async function _ec_setupAuthLinks(){const isAuth=await _ec_checkAuth(),nav=document.querySelector('.topnav')||document.querySelector('.topbar .topnav')||document.querySelector('nav');if(!nav)return;let loginLink=nav.querySelector('#loginLink'),logoutLink=nav.querySelector('#logoutBtn');if(!loginLink){loginLink=document.createElement('a');loginLink.id='loginLink';loginLink.href='/login.html';loginLink.textContent='Login';loginLink.className='nav-btn';nav.appendChild(loginLink)}if(!logoutLink){logoutLink=document.createElement('a');logoutLink.id='logoutBtn';logoutLink.href='#';logoutLink.textContent='Logout';logoutLink.className='nav-btn';logoutLink.style.display='none';nav.appendChild(logoutLink)}isAuth?(loginLink.style.display='none',logoutLink.style.display=''):(loginLink.style.display='',logoutLink.style.display='none');logoutLink.addEventListener('click',async e=>{e.preventDefault();try{await fetch('/logout',{method:'POST'})}catch(e){}window.location='/login.html'})}'loading'===document.readyState?document.addEventListener('DOMContentLoaded',_ec_setupAuthLinks):_ec_setupAuthLinks();
